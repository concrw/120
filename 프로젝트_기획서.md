# AI 패션 아바타 영상 생성 플랫폼 - 프로젝트 기획서

## 프로젝트 개요

**목적**: AI 모델이 제품(패션/뷰티)을 착용하고 다양한 배경에서 동작하는 15초 마케팅 영상을 자동으로 생성하는 플랫폼

**타겟 사용자**:
- 패션/뷰티 브랜드
- 이커머스 셀러
- 인플루언서
- 마케팅 담당자

**레퍼런스**: Instagram/YouTube @nikaaipovna 스타일

---

## 경쟁사 분석: Runway Gen-4 vs 우리 서비스

### Runway Gen-4 현황 (2025년 4월 출시)

**주요 기능**:
- 캐릭터 일관성: 레퍼런스 이미지 1장으로 다양한 씬에서 같은 캐릭터 유지
- Act-One/Two: 표정 및 제스처 매핑
- 제품 배치: 실제 제품 사진을 다양한 배경에 배치
- Image-to-Video: 정지 이미지 → 영상 생성

**타겟**: 범용 크리에이터 (영화, 광고, 개인 콘텐츠)

**가격**: $12-76/월 구독제

### 핵심 차별점 비교표

| 구분 | Runway Gen-4 | 우리 서비스 | 우위 |
|------|--------------|-------------|------|
| **포지셔닝** | 범용 영상 도구 | 패션 특화 솔루션 | ✅ 전문성 |
| **워크플로우** | 수동 편집 (15분+) | 자동화 (2분 설정) | ✅ 효율성 |
| **캐릭터 일관성** | 약함 (레퍼런스만) | 강함 (LoRA 학습) | ✅ 품질 |
| **제품 디테일** | 보장 없음 | 90% threshold 자동 체크 | ✅ 품질 보증 |
| **품질 재생성** | 수동 (추가 비용) | 자동 (무료 3회) | ✅ UX |
| **Video Character Transfer** | ❌ 불가능 | ✅ Phase 1.5.5 | ✅ 독점 기능 |
| **배치 생성** | ❌ 없음 | ✅ 10-100개 동시 | ✅ B2B 특화 |
| **패션 프롬프트** | 범용 | 패션 전문 최적화 | ✅ 전문성 |
| **API 제공** | ❌ 없음 | ✅ Phase 2 계획 | ✅ B2B |
| **가격 모델** | 구독 강제 | 사용량 기반 | ✅ 유연성 |

### 우리만의 3가지 절대 우위

#### 1. 패션 특화 자동화
```
Runway: 편집 지식 필요 (15분 설정 + 30분 렌더링)
우리: 클릭만 (2분 설정 + 25분 자동 대기)

→ 시간: 7.5배 절감
→ 난이도: 전문가 → 일반인
```

#### 2. 제품 디테일 90% 보장
```
Runway:
- 복잡한 패턴/로고 왜곡 가능
- 품질 체크 없음
- 재생성 수동 (추가 비용)

우리:
- IP-Adapter++ + ControlNet Canny
- 자동 품질 체크 (90% threshold)
- 실패 시 자동 재생성 (무료 3회)
- Delta E < 5 색상 정확도
```

#### 3. Video Character Transfer (독점)
```
Runway: 불가능 ❌

우리 (Phase 1.5.5):
- 실제 모델 영상 → AI 캐릭터 교체 ✅
- 1회 촬영 → 무한대 재활용 ✅
- 비용 90% 절감 ✅
```

### 실제 사용 시나리오 비교

**과제**: 신상품 10벌의 마케팅 영상 제작

| 단계 | Runway Gen-4 | 우리 서비스 |
|------|--------------|-------------|
| **설정** | 10회 × 15분 = 150분 | 1회 × 10분 = 10분 |
| **렌더링** | 10회 × 30분 = 300분 | 자동 90분 (백그라운드) |
| **재작업** | 평균 30% 실패 → 135분 추가 | 자동 재생성 (무료) |
| **총 시간** | 585분 (9.75시간) | 100분 (1.7시간) |
| **필요 스킬** | 영상 편집 지식 | 없음 (클릭만) |
| **비용** | $28/월 구독 | $150 (10개 × $15) |
| **품질 보장** | ❌ 없음 | ✅ 90% threshold |

**결과**: 시간 5.85배 절감, 난이도 제로, 품질 보장

### 경쟁 전략

#### 단기 (MVP ~ Phase 1.5)
1. **틈새 시장 장악**: 패션/뷰티 브랜드에만 집중
2. **자동화 강조**: "편집 지식 불필요" 메시지
3. **품질 보증**: 90% threshold 차별화

#### 중기 (Phase 2)
1. **독점 기능 출시**: Video Character Transfer
2. **B2B 기능 강화**: API, 배치 생성, 팀 협업
3. **성공 사례 확보**: 유명 브랜드 레퍼런스

#### 장기 (v2.0+)
1. **플랫폼화**: 쇼핑몰 솔루션 통합
2. **템플릿 마켓플레이스**: 크리에이터 생태계
3. **글로벌 확장**: 다국어 지원

---

## 패션 AI 시장 전체 분석

### 시장 카테고리 분류

패션 AI 서비스는 크게 4가지 카테고리로 분류됩니다:

#### 1. 정지 이미지 생성 (Product Photography)

**대표 서비스**: Lalaland.ai, Botika.io, Veesual.ai

**핵심 기능**:
- 제품 사진 → AI 모델 착용 이미지 생성
- 다양한 체형/인종 모델 표현
- 배경 교체 및 조명 조정

**타겟**: 이커머스, 중소 패션 브랜드

**시장 규모**: $500M (작음)

**한계점**:
- 영상 생성 불가 ❌
- 마케팅 콘텐츠로 활용 제한적
- SNS 영상 트렌드 대응 불가

#### 2. 가상 피팅 / Try-On (Virtual Fitting)

**대표 서비스**: Wanna (Farfetch), Vue.ai, Revery.ai, Zero10

**핵심 기능**:
- 사용자 사진/영상 + 제품 → 가상 착용
- AR 기반 실시간 피팅
- 3D 시뮬레이션

**타겟**: B2C (소비자), 럭셔리 브랜드

**시장 규모**: $800M

**한계점**:
- 마케팅 콘텐츠 생성 아님 ❌
- 개인 소비자용 (B2B 아님)
- 브랜드 마케팅 영상 제작 불가

#### 3. 범용 영상 도구 (General Video Tools)

**대표 서비스**: Runway ML

**핵심 기능**:
- 텍스트/이미지 → 영상 생성
- 캐릭터 일관성 (레퍼런스)
- Image-to-Video

**타겟**: 모든 크리에이터 (범용)

**시장 규모**: $100B (AI 도구 전체)

**한계점**:
- 패션 특화 없음 ❌
- 수동 편집 필요
- 제품 디테일 보장 없음

#### 4. AI 아바타 영상 (AI Avatar Presenters)

**대표 서비스**: Synthesia, D-ID, DeepBrain AI

**핵심 기능**:
- 말하는 AI 아바타 생성
- 스크립트 → 프레젠테이션 영상
- 다국어 지원

**타겟**: 기업 교육, 설명 영상

**시장 규모**: $1.5B

**한계점**:
- 패션 마케팅 영상 아님 ❌
- 제품 착용 기능 없음
- 전신 동작 불가 (상반신만)

---

### 시장 포지셔닝 매트릭스

```
                   영상 생성
                       ↑
                       │
                       │  우리 서비스
                       │  (패션 마케팅 영상)
                       │  블루오션 ✅
                       │
                       │
이미지만 ──────────────┼──────────────  완성도 높음
                       │
    Lalaland/          │              Runway
    Botika             │              (범용 도구)
  (제품 사진)          │
                       │
                       │
                 단순 피팅
```

**핵심 발견**:
- **영상 생성 + 패션 특화 + 자동화** 조합은 우리만 ✅
- 기존 서비스는 이미지만 또는 범용 도구
- 패션 마케팅 영상 시장은 블루오션

---

### "이미지 vs 영상" 시장 차이 분석

#### 왜 대부분이 이미지만 하는가?

**기술적 이유**:
```
이미지 생성 난이도: ⭐⭐⭐ (중간)
- Stable Diffusion으로 충분
- 1-2분 생성
- 품질 안정적

영상 생성 난이도: ⭐⭐⭐⭐⭐ (매우 높음)
- Temporal consistency 필요
- 25-30분 생성
- 품질 불안정
- 비용 10배 이상
```

**비즈니스 이유**:
```
이미지 시장:
- 진입 쉬움
- 빠른 MVP 가능
- 경쟁 치열 (10+ 스타트업)

영상 시장:
- 진입 어려움
- 긴 개발 기간
- 경쟁 거의 없음 (블루오션)
```

#### 시장 크기 비교

| 카테고리 | 시장 규모 | 성장률 | 경쟁 | 우리 포지션 |
|---------|----------|--------|------|------------|
| **제품 사진 대체** | $500M | 15%/년 | 10+ 스타트업 | ❌ 경쟁 심함 |
| **마케팅 영상 생성** | $5B | 40%/년 | 거의 없음 | ✅ 블루오션 |
| **가상 피팅** | $800M | 20%/년 | 5-7개 스타트업 | ❌ 다른 시장 |
| **범용 AI 도구** | $100B | 50%/년 | 대기업 주도 | ❌ 레드오션 |

**결론**:
- 마케팅 영상 시장은 제품 사진 시장의 **10배** 크기
- 성장률 2.6배 더 높음
- 경쟁은 거의 없음 (영상 특화 서비스 부재)

---

### 고객 니즈 차이

#### 제품 사진 니즈 (Lalaland, Botika 타겟)

```
고객: "이커머스 상세 페이지에 쓸 제품 사진이 필요해요"

용도:
- 상세 페이지 썸네일
- 다양한 각도 제품 사진
- 여러 모델로 다양성 표현

특징:
- 정적 이미지로 충분
- 대량 생성 (100-1000장)
- 낮은 단가 ($0.10-1 per 이미지)
```

#### 마케팅 영상 니즈 (우리 타겟)

```
고객: "SNS, 광고에 쓸 영상이 필요해요"

용도:
- Instagram/TikTok 릴스
- YouTube 쇼츠
- 광고 캠페인
- 브랜드 스토리텔링

특징:
- 동적 영상 필수 ✅
- 소량 생성 (10-50개)
- 높은 단가 ($15-30 per 영상)
- 높은 마진 가능
```

**결과**:
- 이미지: 대량/저가 시장 (레드오션)
- 영상: 소량/고가 시장 (블루오션)
- 우리는 고마진 시장 선택 ✅

---

## 주요 경쟁사 상세 비교

### Lalaland.ai / Botika.io (최대 경쟁자)

#### 기능 비교

| 항목 | Lalaland/Botika | 120 프로젝트 | 승자 |
|------|-----------------|--------------|------|
| **출력물** | 정지 이미지 | 15초 영상 | ✅ 우리 |
| **영상 생성** | ❌ 없음 | ✅ 핵심 기능 | ✅ 우리 |
| **용도** | 이커머스 제품 사진 | 마케팅 영상 (SNS, 광고) | ✅ 우리 (더 큰 시장) |
| **자동화** | 부분 자동 (설정 많음) | 완전 자동 | ✅ 우리 |
| **캐릭터 일관성** | 약함 | 강함 (LoRA) | ✅ 우리 |
| **제품 디테일** | 보장 없음 | 90% threshold | ✅ 우리 |
| **가격** | $99-499/월 구독 | $15-30/영상 | ✅ 명확성 |
| **배치 생성** | 제한적 | 10-100개 동시 | ✅ 우리 |
| **타겟 고객** | 이커머스 (작음) | 마케팅팀 (큼) | ✅ 우리 |

#### 실제 사용 시나리오: 기존 서비스 조합 vs 120 단일 솔루션

**과제**: 신상품 10개의 마케팅 영상 필요

**방법 1: Lalaland + Runway 조합 (기존)**

```
1단계: Lalaland로 제품 이미지 생성
   - 비용: $299/월 구독
   - 시간: 10개 이미지 × 2분 = 20분
   - 결과: 정지 이미지 10장

2단계: Runway ML로 이미지→영상 변환
   - 비용: $28/월 구독
   - 시간:
     - 이미지 업로드 및 설정: 10회 × 10분 = 100분
     - 프롬프트 작성: 10회 × 5분 = 50분
     - 렌더링: 10회 × 30분 = 300분
     - 품질 체크 및 재시도 (30% 실패): 135분
   - 결과: 영상 10개 (품질 불확실)

3단계: 후처리 (필요 시)
   - 편집 소프트웨어 사용
   - 시간: 평균 30분

총 비용: $327 + 편집 소프트웨어
총 시간: 635분 (10.6시간)
필요 스킬: Runway 사용법, 프롬프트 엔지니어링
품질: 불확실 (재생성 수동)
```

**방법 2: 120 프로젝트 단일 솔루션**

```
1단계: 제품 사진 업로드
   - 시간: 10개 × 30초 = 5분

2단계: 모델 및 배경 선택
   - 시간: 2분

3단계: [배치 생성] 클릭
   - 비용: $150 (10개 × $15)
   - 시간: 자동 90분 (백그라운드)
   - 결과: 영상 10개 (품질 90% 보장)

총 비용: $150
총 시간: 7분 설정 + 90분 자동 = 97분 (1.6시간)
필요 스킬: 없음 (클릭만)
품질: 90% threshold 보장, 자동 재생성
```

**비교 결과**:

| 지표 | 기존 조합 | 120 프로젝트 | 개선 |
|------|----------|--------------|------|
| **비용** | $327 | $150 | 54% 절감 |
| **시간** | 10.6시간 | 1.6시간 | 85% 절감 |
| **스킬** | 필요 (중급) | 불필요 | 진입장벽 제거 |
| **품질** | 불확실 | 보장 | 리스크 제거 |
| **편의성** | 2개 도구, 3단계 | 1개 도구, 1단계 | 6배 간소화 |

---

### Video Character Transfer 독점성 재강조

#### 모든 경쟁사가 불가능한 이유

**Lalaland/Botika**:
```
기술 스택: 이미지 생성에만 집중
문제:
- 영상 생성 기술 없음
- Temporal consistency 경험 없음
- DWPose 통합 불가능

결론: 영상도 못 만드는데 Character Transfer는 불가능 ❌
```

**Runway Gen-4**:
```
기술 스택: 범용 영상 생성
문제:
- Image-to-Video만 가능
- Video-to-Video Character Transfer 없음
- 유스케이스 불명확 (패션 특화 아님)

결론: 기술은 있지만 패션 유스케이스에 투자 안 함 ❌
```

**Synthesia/D-ID**:
```
기술 스택: AI 아바타 (얼굴만)
문제:
- 전신 동작 불가능
- 의류 착용 렌더링 없음
- 패션 산업 타겟 아님

결론: 다른 시장 (교육/설명 영상) ❌
```

#### 우리만 가능한 이유

```
1. 패션 시장 깊은 이해
   - 고객 니즈 정확히 파악: "1회 촬영 → 무한 재활용"
   - 명확한 ROI: 비용 90% 절감

2. 기술 스택 완비
   - DWPose (포즈 추출) ✅
   - Segment Anything (배경 분리) ✅
   - LoRA (캐릭터 일관성) ✅
   - Temporal Consistency ✅

3. 전체 파이프라인 자동화
   - 영상 입력 → 캐릭터 교체 → 완성본 출력
   - 중간 단계 수동 개입 불필요

4. 첫 번째 시도 (First Mover)
   - 패션 영상에 이 기능 제안한 사람 없음
   - 시장 선점 가능
```

#### 기술적 실현 가능성

| 단계 | 기술 | 난이도 | 개발 기간 |
|------|------|--------|----------|
| 1. 포즈 추출 | DWPose | ⭐⭐⭐ | 1주 |
| 2. 배경 분리 | SAM | ⭐⭐ | 3일 |
| 3. 캐릭터 매핑 | LoRA + IP-Adapter | ⭐⭐⭐⭐ | 2주 |
| 4. Temporal 보정 | AnimateDiff | ⭐⭐⭐⭐⭐ | 3주 |
| 5. 배경 재합성 | Compositing | ⭐⭐⭐ | 1주 |
| **전체** | - | **⭐⭐⭐⭐** | **8주** |

**결론**: Phase 1.5.5에서 충분히 구현 가능

---

## 경쟁 리스크 및 방어 전략

### 잠재적 위협 시나리오

#### 시나리오 1: Lalaland가 영상 기능 추가

**가능성**: 중간 (50%)

**시기**: 1-2년 후

**대응 전략**:

```
1. First Mover Advantage (6-12개월 선점)
   - MVP 10주 만에 출시
   - Phase 1.5 4개월 내 완성
   - 시장 선점 후 브랜드 확보

2. 자동화 우위 유지
   - 그들: 도구 (사용자가 설정)
   - 우리: 서비스 (AI가 자동 처리)
   - 진입장벽: UX/자동화 차별화

3. 품질 보장 시스템
   - 90% threshold 자동 체크
   - 무료 재생성 (3회)
   - 그들은 못 따라함 (비용 구조 다름)

4. B2B 기능 강화
   - API 제공 (쇼핑몰 통합)
   - 팀 협업 기능
   - 고객 lock-in 강화
```

**결론**: 1년 선점 + 자동화 우위 = 방어 가능 ✅

---

#### 시나리오 2: Runway가 패션 특화 모드 추가

**가능성**: 낮음 (20%)

**이유**:
- 범용 플랫폼 철학과 상충
- 패션만 특화하면 다른 산업 소외
- 대기업 조직 구조상 빠른 특화 어려움

**만약 일어난다면**:

```
대응 전략:

1. 전문성 강조
   - "Runway는 10개 산업, 우리는 패션만"
   - 패션 브랜드는 전문가 선택

2. 가격 경쟁
   - 우리: $15/영상 (명확)
   - Runway: $28/월 + 사용량 (불명확)
   - 중소 브랜드는 우리 선택

3. 고객 관계 강화
   - 패션 전문 고객 지원
   - 업계 네트워킹
   - 브랜드 충성도 확보

4. Exit 전략
   - Runway가 인수 제안 가능성 높음
   - 좋은 가격이면 매각 고려
```

**결론**: 위협 낮음, 오히려 Exit 기회 ✅

---

#### 시나리오 3: Adobe/Canva 대기업 진입

**가능성**: 중간 (40%)

**시기**: 2-3년 후

**대응 전략**:

```
1. 틈새 시장 장악 (대기업 오기 전)
   - 패션 브랜드 Top 100 확보
   - 업계 표준 되기
   - "패션 영상 = 120" 브랜드 확립

2. B2B 고객 lock-in
   - API 통합 (쇼핑몰, PIM 시스템)
   - 전환 비용 높임
   - 장기 계약 (연간 구독)

3. 데이터 & 노하우 축적
   - 패션 특화 데이터셋
   - 업계별 베스트 프랙티스
   - 대기업이 따라잡기 어려운 전문성

4. Exit 전략
   - Adobe/Canva가 인수 제안 (높은 확률)
   - 또는 Shopify 같은 플랫폼 매각
   - 목표: 3-5년 내 $100M+ Exit
```

**결론**: 위협이지만 Exit 기회도 큼 ✅

---

#### 시나리오 4: 한국 대기업 (네이버, 카카오) 진입

**가능성**: 낮음 (15%)

**이유**:
- 글로벌 시장 경험 부족
- 패션 산업 이해도 낮음
- B2B SaaS 경험 부족

**만약 일어난다면**:

```
대응 전략:

1. 글로벌 시장 선점
   - 한국 시장만 공략하지 않음
   - 미국, 유럽 동시 공략
   - 언어: 한/영/중/일 지원

2. 기술 우위 유지
   - 최신 AI 모델 빠르게 도입
   - Veo, Sora 등 즉시 통합
   - 대기업은 의사결정 느림

3. 스타트업 민첩성
   - 고객 피드백 즉시 반영 (2주)
   - 대기업은 6개월+

4. 파트너십
   - 대기업과 경쟁보다 협력
   - 화이트라벨 솔루션 제공
   - Win-Win 전략
```

**결론**: 위협 낮음, 파트너십 기회 ✅

---

### 종합 방어 전략

#### 단기 (1년)

```
목표: 시장 선점

전략:
1. 빠른 MVP 출시 (10주)
2. 첫 100개 고객 확보
3. 케이스 스터디 10개 발표
4. Product Hunt, TechCrunch 홍보

KPI:
- MRR $10K
- 고객 100개
- 영상 생성 1,000개/월
```

#### 중기 (2-3년)

```
목표: 업계 표준 되기

전략:
1. API 출시 (쇼핑몰 통합)
2. Phase 1.5 모든 기능 완성
3. 유명 브랜드 레퍼런스 확보
4. 팀 확장 (10-15명)

KPI:
- ARR $1M
- 고객 500개
- API 통합 50개
```

#### 장기 (3-5년)

```
목표: Exit 또는 독립 성장

Exit 시나리오:
- Runway 인수: $50-100M
- Adobe/Canva 인수: $100-200M
- Shopify 인수: $150-300M

독립 성장 시나리오:
- ARR $10M+
- 고객 5,000개
- 글로벌 확장 (미국, 유럽, 일본)
- IPO 준비
```

---

## 핵심 기준점 (개발 시 절대 변경 금지)

### 1. 콘텐츠 정책
```
✅ 허용: 일반 패션, 뷰티 제품
❌ 금지: 섹시 란제리, 성인 콘텐츠
- 이 기준은 외부 판매용 플랫폼의 절대 원칙
- 별도 프로젝트로 분리 처리
```

### 2. 영상 스펙
```
- 길이: 15초 (고정, 절대 변경 불가)
- 해상도: 1080p (최소)
- 프레임레이트: 30fps
- 포맷: MP4
- 사운드: 선택적 (Veo 3.1 native audio 또는 무음)
```

### 3. 사용자 경험 원칙
```
1. 단순함 > 기능 많음
2. 한 화면에 모든 옵션 표시 (스크롤 최소화)
3. 대화형 UI 금지 (ChatGPT 스타일 ❌)
4. 미리보기 항상 표시
5. 드래그 앤 드롭 기본 지원
6. 진행상황 명확하게 표시
```

### 4. 제품 렌더링 품질 기준
```
- 제품 디테일 선명도: 90% 이상 유지
- 색상 정확도: Delta E < 5
- 텍스트/로고: 읽을 수 있는 수준
- 원본 제품 사진 대비 왜곡 최소화
- 품질 체크 자동화: threshold 90% 미만 시 재생성
```

### 5. 처리 시간 기준
```
- 단일 영상: 25-30분 (목표)
- 배치 10개: 60-90분 (목표)
- 사용자 대기 경험: 백그라운드 처리 + 이메일 알림
- 실시간 진행률 표시
```

### 6. 비용 구조
```
- Veo 3.1 Fast: $0.15/초 = $2.25 per 15초 영상
- Midjourney: ~$0.50 per 이미지 (캐릭터 4장 = $2)
- 총 원가: ~$4.25 per 영상
- 판매가 목표: $15-30 per 영상 (3-7배 마진)
```

---

## 기능 명세

### Phase 1: MVP (10주) - 필수 기능만

#### 1.1 모델 생성 (AI 아바타 만들기)

**입력**:
- 스타일 선택: [realistic, fashion, beauty, editorial, casual] (5개 프리셋)
- 또는 사진 업로드: 10-20장 (LoRA 학습용)

**처리 과정**:
- Midjourney V6 --cref 사용
- 4방향 이미지 생성 (정면, 좌, 우, 전신)
- 학습 시간: 15-20분

**출력**:
- 일관된 캐릭터 ID
- 프리뷰 이미지 4장

**제약사항**:
- 모델당 1개 캐릭터만 (MVP에서는 멀티 모델 미지원)
- 수정 불가 (재생성만 가능)

#### 1.2 제품 업로드 및 분석

**입력**:
- 제품 이미지: 1장 (PNG/JPG, 최소 1024px)
- 제품 타입: [상의, 하의, 원피스, 신발, 악세서리, 뷰티]

**처리 과정**:
- 배경 제거 (rembg)
- AI 분석: 색상, 스타일, 디테일 추출
- IP-Adapter++ 임베딩 생성
- 디테일 강화 모드: ControlNet Canny 활성화

**출력**:
- 제품 메타데이터
- 배경 제거된 이미지
- 착용 시뮬레이션 프리뷰

**제약사항**:
- 1개 영상당 1개 제품만 (MVP)
- 복잡한 패턴/텍스트가 있는 제품은 디테일 강화 모드 필수

#### 1.3 배경 선택

**프리셋 배경 (MVP)**:
1. Urban Street (도시 거리)
2. Beach Sunset (해변)
3. Studio White (스튜디오)
4. Cafe Interior (카페)
5. Nature Park (공원)

**커스텀 배경**:
- Phase 1.5에서 추가 (MVP 제외)

**출력**:
- 선택된 배경 ID
- 프리뷰 썸네일

#### 1.4 영상 생성

**입력**:
- 모델 ID
- 제품 ID
- 배경 ID
- 동작 프리셋: [걷기, 포즈, 돌기, 자연스러운 움직임] (4개)

**처리 파이프라인**:
1. 프롬프트 자동 생성 (GPT-4)
2. 캐릭터 + 제품 + 배경 합성 이미지 생성 (Stable Diffusion + IP-Adapter++)
3. Veo 3.1 Fast로 15초 영상 생성
4. 품질 체크 (90% threshold)
5. 실패 시 자동 재시도 (최대 3회)
6. 성공 시 사용자 알림

**출력**:
- MP4 파일 (1080p, 30fps, 15초)
- 썸네일 이미지
- 메타데이터 (생성 시간, 사용 크레딧)

**제약사항**:
- 수동 편집 불가 (자동화만)
- 15초 고정 (변경 불가)
- 재생성만 가능 (수정 불가)

### Phase 1.5: 고급 기능 (4주) - MVP 이후 추가

#### 1.5.1 멀티 모델 지원

**입력**:
- 모델 선택: 1-3개
- 구도: [커플룩, 단체, 개별 씬]

**처리**:
- Multi-LoRA 블렌딩
- Multi-person ControlNet
- 씬 분리 또는 동시 등장 선택

**제약사항**:
- 최대 3명까지
- 모든 모델이 같은 제품 착용 (다른 제품 미지원)

#### 1.5.2 커스텀 배경

**입력**:
- 배경 이미지: 1장 (1920x1080 이상)
- 또는 배경 영상: 15초 (MP4)

**처리**:
- Depth map 생성
- 조명 분석
- 모델 통합 렌더링

**제약사항**:
- 복잡한 배경은 품질 저하 가능 (사전 경고)

#### 1.5.3 커스텀 스타일/무드

**입력**:
- 레퍼런스 이미지: 1-3장
- 스타일 키워드: [시네마틱, 빈티지, 미니멀, 생동감 등]

**처리**:
- Style transfer
- Color grading
- Lighting adaptation

**출력**:
- 스타일 적용된 영상

#### 1.5.4 커스텀 동작

**입력**:
- 샘플 영상: 15초 이하 (MP4)

**처리**:
- DWPose 추출
- Temporal consistency 적용
- AnimateDiff로 모션 생성

**제약사항**:
- 너무 복잡한 동작은 실패율 높음 (사전 경고)

#### 1.5.5 Real Model Transfer (Runway 킬러 기능!)

**개요**:
- 실제 모델이 촬영한 영상을 AI 캐릭터로 교체
- 한 번 촬영 → 무한대 캐릭터 재활용
- **Runway Gen-4에 없는 독점 기능**

**입력**:
- 원본 영상: 실제 모델이 제품 착용하고 움직이는 영상 (15초)
- 타겟 캐릭터: AI 모델 ID (1-3개)
- 타겟 제품: 교체할 제품 ID (선택적)

**처리**:
1. DWPose로 원본 영상에서 포즈/동작 추출
2. 배경 분리 (Segment Anything Model)
3. AI 캐릭터 + 제품을 원본 동작에 매핑
4. Temporal consistency 보정
5. 배경 재합성 + 조명 매칭

**출력**:
- AI 캐릭터가 원본과 똑같은 동작을 하는 영상
- 배경/조명은 원본 유지
- 제품 디테일 90% 보장

**사용 사례**:
1. 시즌마다 같은 영상을 다른 모델로 재활용
2. A/B 테스트: 같은 영상, 다른 모델로 비교
3. 다양성: 한 영상을 여러 인종/체형 모델로 변환
4. 비용 절감: 1회 촬영 → 무한대 버전 생성

**제약사항**:
- 원본 영상 품질이 720p 이상이어야 함
- 너무 빠른 동작은 품질 저하 가능 (사전 경고)
- 얼굴이 가려지는 구간은 재구성 실패 가능

**마케팅 포인트**:
> "Runway Gen-4도 못하는 기능!
> 실제 모델 촬영은 한 번만, AI로 무한 재활용하세요"

**비용 효율성**:
- 기존: 모델 10명 촬영 = $10,000+
- 신기능: 모델 1명 촬영 + AI 9개 = $1,000 + $90 (90% 절감)

#### 1.5.6 부위별 레퍼런스 조합 (Multi-Reference Feature Mixing)

**개요**:
- 여러 사람의 신체 부위를 선택적으로 조합한 하이브리드 아바타 생성
- "지젤의 다리 + 기네스 팰트로의 턱선 + 케이트 모스의 체형"
- 완벽한 브랜드 모델 커스터마이징

**입력**:
- 레퍼런스 이미지: 2-5개 (각 부위별)
- 부위 선택: 얼굴, 체형, 다리, 팔, 피부톤 등
- 혼합 비율: 부위별 가중치 (0-100%)

**처리 파이프라인**:

```
1단계: 부위별 LoRA 학습
   - 각 레퍼런스 이미지에서 Regional LoRA 생성
   - 얼굴: IP-Adapter Face (512x512 crop)
   - 체형: ControlNet OpenPose (전신)
   - 피부톤: Color Grading LoRA

2단계: Multi-LoRA 블렌딩
   - 부위별 LoRA를 가중치 기반으로 결합
   - 레퍼런스 A 얼굴 (70%) + 레퍼런스 B 얼굴 (30%)
   - Regional IP-Adapter++로 부위별 마스킹

3단계: 일관성 검증
   - 부위 간 경계선 자연스러움 체크
   - 조명/색감 통일성 확인
   - 실패 시 블렌딩 비율 자동 조정

4단계: 최종 렌더링
   - 통합된 LoRA로 4방향 프리뷰 생성
   - 사용자 승인 후 최종 모델 저장
```

**출력**:
- 하이브리드 AI 모델 (4방향 프리뷰)
- 부위별 기여도 시각화
- 저장된 커스텀 LoRA 파일

**UI/UX**:

```
┌─────────────────────────────────────┐
│  부위별 레퍼런스 선택                │
├─────────────────────────────────────┤
│                                      │
│  얼굴형: [이미지 업로드] 가중치 70%  │
│  체형:   [이미지 업로드] 가중치 100% │
│  다리:   [이미지 업로드] 가중치 80%  │
│  피부톤: [이미지 업로드] 가중치 60%  │
│                                      │
│  [+ 부위 추가]                       │
│                                      │
│  [미리보기 생성] [저장]              │
└─────────────────────────────────────┘
```

**사용 사례**:

1. **브랜드 이상형 모델 제작**
   - 럭셔리 브랜드: 유럽 모델 얼굴 + 아시아 체형
   - 스포츠웨어: 운동선수 체형 + 대중적 얼굴

2. **다양성 구현**
   - 한 얼굴형 + 여러 체형 조합
   - 다양한 인종 특징 혼합

3. **A/B 테스트**
   - 같은 얼굴, 다른 체형으로 전환율 비교
   - 부위별 영향도 분석

**제약사항**:
- 최대 5개 레퍼런스 (성능 제약)
- 너무 상반된 특징 조합 시 부자연스러움 (사전 경고)
- 부위당 최소 512x512 해상도 필요
- 얼굴 + 체형 조합은 필수, 나머지는 선택

**기술적 난이도**: ⭐⭐⭐⭐ (높음)

**개발 기간**: 3주
- Regional IP-Adapter 통합: 1주
- Multi-LoRA 블렌딩 엔진: 1.5주
- UI/UX 구현: 0.5주

**비용 구조**:
- LoRA 학습: $0.50 × 5개 = $2.50
- 블렌딩 테스트: $0.20 × 3회 = $0.60
- 최종 렌더링: $0.30
- **총 비용**: $3.40 per 아바타

**가격 책정**:
- 고객 가격: $10 per 커스텀 아바타
- 마진: $6.60 (190%)

**우선순위**: Phase 1.5 (중기)
- MVP 이후 고급 기능으로 추가
- 프리미엄 고객 타겟

---

#### 1.5.7 프롬프트 미세 조정 (Iterative Prompt Refinement)

**개요**:
- 텍스트 대화로 AI 모델을 점진적으로 개선
- "눈을 더 크게", "머리를 더 길게" 같은 자연어 수정
- 편집 지식 없이 완벽한 결과물 달성

**입력**:
- 기본 아바타: 이미 생성된 AI 모델
- 수정 요청: 자연어 텍스트
  - 예: "눈을 더 크게 만들어줘"
  - 예: "머리를 어깨까지 오는 길이로"
  - 예: "좀 더 미소 짓는 표정으로"

**처리 파이프라인**:

```
1단계: 프롬프트 해석 (GPT-4)
   사용자 입력: "눈을 더 크게"
   ↓
   GPT-4 분석:
   - 수정 부위: 눈
   - 수정 방향: 크기 증가
   - 강도: +20%
   ↓
   기술 프롬프트 생성:
   "large expressive eyes, detailed iris, prominent eye shape"

2단계: Img2Img 생성 (SDXL)
   - 기존 이미지를 시드로 사용
   - Denoising strength: 0.3-0.5 (부분 수정)
   - 수정 프롬프트 추가
   - ControlNet Canny로 구조 유지

3단계: 변경 사항 하이라이트
   - 원본 vs 수정본 비교
   - 변경된 영역 강조 표시
   - 사용자 승인 대기

4단계: 반복 또는 확정
   - 승인: 새 버전으로 저장
   - 추가 수정: 다시 1단계로
   - 되돌리기: 이전 버전 복원
```

**출력**:
- 수정된 아바타 이미지
- 변경 이력 (버전 관리)
- Before/After 비교 뷰

**UI/UX (채팅 인터페이스)**:

```
┌─────────────────────────────────────┐
│  AI 모델 미세 조정                   │
├─────────────────────────────────────┤
│                                      │
│  [현재 아바타 이미지]                │
│                                      │
│  💬 사용자: 눈을 더 크게 만들어줘    │
│                                      │
│  🤖 AI: 눈 크기를 20% 키웠습니다.    │
│       [수정된 이미지]                │
│       ✅ 적용  ↩️ 되돌리기           │
│                                      │
│  💬 사용자: 머리를 더 길게           │
│                                      │
│  🤖 AI: 머리 길이를 어깨까지         │
│       늘렸습니다.                    │
│       [수정된 이미지]                │
│       ✅ 적용  ↩️ 되돌리기           │
│                                      │
│  [입력창: 수정 요청 입력...]         │
└─────────────────────────────────────┘
```

**지원 가능한 수정 유형**:

| 카테고리 | 수정 예시 |
|---------|----------|
| **얼굴 특징** | 눈 크기, 코 높이, 입술 두께, 턱선 각도 |
| **헤어스타일** | 길이, 색상, 웨이브, 스타일 (단발/장발) |
| **표정** | 미소, 중립, 시크, 친근함 정도 |
| **피부** | 톤 밝기, 질감, 메이크업 강도 |
| **체형** | 어깨 너비, 허리 비율 (제한적) |
| **포즈** | 고개 각도, 시선 방향 |

**사용 사례**:

1. **완벽주의 고객**
   - 10-15회 반복 수정으로 이상형 완성
   - 세밀한 디테일까지 조정

2. **A/B 테스트**
   - "버전 A: 친근한 미소"
   - "버전 B: 시크한 무표정"
   - 전환율 비교 후 선택

3. **브랜드 가이드 준수**
   - "우리 브랜드는 자연스러운 메이크업만"
   - "미소는 살짝만, 과하지 않게"

**제약사항**:
- 무료: 5회 수정까지
- 유료: 무제한 (추가 $2)
- 과도한 수정은 품질 저하 가능 (경고 표시)
- 완전히 다른 사람으로 변경은 불가 (새 생성 권장)

**기술적 난이도**: ⭐⭐⭐ (중간)

**개발 기간**: 2주
- GPT-4 프롬프트 엔진: 1주
- Img2Img 파이프라인: 0.5주
- 채팅 UI 구현: 0.5주

**비용 구조**:
- GPT-4 프롬프트 분석: $0.02 per 수정
- SDXL Img2Img: $0.15 per 수정
- 평균 5회 수정: $0.85

**가격 책정**:
- 기본 (5회): 무료 (아바타 생성에 포함)
- 무제한 수정: +$2 per 아바타
- 마진: $1.15 (135%)

**우선순위**: Phase 1.5 (중기)
- UX 개선의 핵심 기능
- 고객 만족도 크게 향상

**마케팅 포인트**:
> "편집 소프트웨어 필요 없어요.
> 말로만 설명하면 AI가 알아서 수정합니다."

---

#### 1.5.8 커스텀 포즈 학습 (Custom Pose Training)

**개요**:
- 브랜드 고유의 시그니처 포즈를 AI에게 학습
- 제품 진열 자세, 브랜드 특유의 무브먼트 재현
- 한 번 학습하면 모든 모델/제품에 재사용

**입력**:
- 포즈 레퍼런스: 5-10개 이미지 또는 짧은 영상 (3-5초)
- 포즈 이름: "브랜드 시그니처 포즈 #1"
- 적용 제품: 특정 제품 카테고리 (선택)

**처리 파이프라인**:

```
1단계: 포즈 추출
   - DWPose로 각 이미지에서 골격 추출
   - 18개 키포인트 좌표 획득
   - 각도/비율 정규화

2단계: 포즈 학습
   방법 A: ControlNet Fine-tuning (정확도 높음)
   - 5-10개 샘플로 ControlNet 미세 조정
   - 2-3시간 학습
   - 높은 재현 정확도 (95%+)

   방법 B: Pose Library (빠름)
   - DWPose 키포인트만 저장
   - 즉시 사용 가능
   - 중간 정확도 (80%)

3단계: 검증
   - 학습된 포즈로 테스트 생성
   - 원본과 비교 (포즈 유사도 %)
   - 90% 이상이면 저장

4단계: 라이브러리 등록
   - 포즈를 사용자 계정에 저장
   - 영상 생성 시 선택 가능
   - 팀 멤버와 공유 가능
```

**출력**:
- 학습된 포즈 ControlNet 모델
- 또는 DWPose 키포인트 JSON
- 포즈 미리보기 (여러 각도)
- 재사용 가능한 포즈 라이브러리

**UI/UX**:

```
┌─────────────────────────────────────┐
│  커스텀 포즈 학습                    │
├─────────────────────────────────────┤
│                                      │
│  포즈 이름: [시그니처 포즈 #1]       │
│                                      │
│  레퍼런스 업로드:                    │
│  📷 [이미지 1] [이미지 2] [이미지 3] │
│  🎥 [영상 1 (3초)]                   │
│                                      │
│  + 더 추가 (최소 5개, 최대 10개)     │
│                                      │
│  학습 방법:                          │
│  ⚡ 빠른 학습 (즉시, 정확도 80%)     │
│  🎯 정밀 학습 (2시간, 정확도 95%)   │
│                                      │
│  [학습 시작]                         │
│                                      │
│  학습 완료 후:                       │
│  ✅ 포즈 정확도: 94%                 │
│  [미리보기] [라이브러리에 저장]      │
└─────────────────────────────────────┘
```

**사용 사례**:

1. **브랜드 시그니처 포즈**
   ```
   스포츠웨어 브랜드:
   - 런닝 준비 자세
   - 스트레칭 포즈
   - 승리 세리머니

   한 번 학습 → 모든 제품에 적용
   ```

2. **제품 진열 최적화**
   ```
   가방 브랜드:
   - 가방을 어깨에 메는 특정 각도
   - 손으로 드는 우아한 자세

   액세서리 브랜드:
   - 목걸이가 잘 보이는 목 각도
   - 반지를 강조하는 손 포즈
   ```

3. **일관성 있는 룩북**
   ```
   시즌 컬렉션 100개 제품:
   - 모두 같은 포즈로 통일
   - 브랜드 정체성 강화
   - 전문적인 비주얼
   ```

**실제 워크플로우 예시**:

```
Step 1: 실제 모델 1명으로 시그니처 포즈 3개 촬영
        - 비용: $500 (모델 + 스튜디오)
        - 시간: 2시간

Step 2: 각 포즈를 AI 학습
        - 포즈 A: 정면 워킹
        - 포즈 B: 측면 제품 강조
        - 포즈 C: 역동적 무브먼트

Step 3: 신상품 100개 제작
        - 각 제품마다 포즈 A, B, C 자동 적용
        - 총 300개 영상 자동 생성
        - 추가 촬영 비용: $0

ROI: $500 투자 → $50,000+ 촬영비 절감
```

**제약사항**:
- 최소 5개 레퍼런스 필요 (정확도 위해)
- 너무 복잡한 포즈 (아크로바틱 등)는 실패율 높음
- 포즈 학습: 정밀 모드는 2-3시간 소요
- 얼굴이 가려지는 포즈는 품질 저하 가능

**기술적 난이도**: ⭐⭐⭐⭐⭐ (매우 높음)

**개발 기간**: 4주
- DWPose 통합: 1주
- ControlNet Fine-tuning 파이프라인: 2주
- 포즈 라이브러리 시스템: 1주

**비용 구조**:

| 학습 방법 | 비용 | 시간 | 정확도 |
|----------|------|------|--------|
| **빠른 학습** | $1 | 즉시 | 80% |
| **정밀 학습** | $5 | 2시간 | 95% |

**사용 비용** (학습 완료 후):
- 포즈 적용: 추가 비용 없음
- 무제한 재사용 가능

**가격 책정**:
- 빠른 학습: $5 per 포즈
- 정밀 학습: $20 per 포즈
- 엔터프라이즈: $100/월 (무제한 포즈 학습)

**우선순위**: Phase 1.5 후반 (장기)
- 기술적 난이도 매우 높음
- B2B 대형 고객 타겟 (ROI 명확)

**마케팅 포인트**:
> "한 번 촬영, 영원히 재사용
> 브랜드 고유의 포즈를 AI에게 학습시키세요"

**B2B 성공 사례 예시**:

```
패션 브랜드 Z:
- 시그니처 포즈 5개 학습 ($100)
- 연간 신상품 500개
- 기존 촬영 비용: $250,000/년
- AI 전환 후: $7,500/년 (포즈 적용)

→ 97% 비용 절감 ($242,500 절감)
→ 1년 ROI: 242,500%
```

---

## 기술 스택 (절대 변경 금지)

### 프론트엔드
```
- 프레임워크: Next.js 14 (App Router)
- 언어: TypeScript
- 스타일링: Tailwind CSS
- UI 컴포넌트: Shadcn/ui
- 상태 관리: Zustand (전역 상태)
- 폼: React Hook Form + Zod
```

### 백엔드
```
- API: Next.js API Routes (FastAPI 절대 사용 금지)
- 데이터베이스: Supabase (PostgreSQL)
- 인증: Supabase Auth
- 스토리지: Cloudflare R2
- 작업 큐: Inngest (serverless)
- 파일 처리: FFmpeg
```

### AI 서비스
```
- 캐릭터 생성: Midjourney V6 API (--cref 필수)
- 영상 생성: Google Veo 3.1 Fast via Gemini API
- 이미지 합성: Replicate API (Stable Diffusion XL + IP-Adapter++)
- 프롬프트 생성: OpenAI GPT-4
- 배경 제거: rembg (self-hosted)
```

### 배포
```
- 호스팅: Vercel
- CDN: Cloudflare
- 모니터링: Sentry
- 분석: PostHog
```

---

## 데이터베이스 스키마

### 사용자 프로필
```sql
CREATE TABLE user_profiles (
  id UUID PRIMARY KEY REFERENCES auth.users(id),
  display_name TEXT,
  credits INTEGER DEFAULT 0,
  subscription_tier TEXT DEFAULT 'free', -- free, pro, enterprise
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);
```

### AI 모델 (아바타)
```sql
CREATE TABLE avatars (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,
  name TEXT NOT NULL,
  type TEXT NOT NULL, -- preset, custom
  style TEXT, -- realistic, fashion, beauty, etc.
  midjourney_ref TEXT, -- --cref 파라미터
  preview_images JSONB, -- [url1, url2, url3, url4]
  lora_weights_url TEXT, -- custom 타입일 경우 LoRA 파일 URL
  status TEXT DEFAULT 'pending', -- pending, processing, completed, failed
  created_at TIMESTAMP DEFAULT NOW()
);
```

### 제품
```sql
CREATE TABLE products (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,
  name TEXT NOT NULL,
  type TEXT NOT NULL, -- top, bottom, dress, shoes, accessories, beauty
  original_image_url TEXT NOT NULL,
  processed_image_url TEXT, -- 배경 제거된 이미지
  metadata JSONB, -- 색상, 스타일, 디테일 등
  ip_adapter_embedding TEXT, -- IP-Adapter++ 임베딩 저장
  created_at TIMESTAMP DEFAULT NOW()
);
```

### 영상 생성 작업
```sql
CREATE TABLE jobs (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,
  avatar_ids UUID[], -- Phase 1: 1개, Phase 1.5: 1-3개
  product_id UUID REFERENCES products(id) ON DELETE SET NULL,
  background_type TEXT NOT NULL, -- preset, custom_image, custom_video
  background_id TEXT, -- 프리셋 ID 또는 커스텀 파일 URL
  action_type TEXT NOT NULL, -- walk, stand_pose, turn, casual_movement, custom
  action_reference_url TEXT, -- 커스텀 동작 샘플 영상 URL
  style_references JSONB, -- 커스텀 스타일 레퍼런스 이미지 URLs

  -- 처리 상태
  status TEXT DEFAULT 'pending', -- pending, processing, completed, failed
  progress INTEGER DEFAULT 0, -- 0-100
  current_step TEXT, -- prompt_generation, scene_generation, video_generation, etc.

  -- 결과
  output_video_url TEXT,
  thumbnail_url TEXT,
  metadata JSONB, -- 생성 시간, 사용 크레딧, 품질 점수 등

  -- 에러 처리
  retry_count INTEGER DEFAULT 0,
  error_message TEXT,

  created_at TIMESTAMP DEFAULT NOW(),
  completed_at TIMESTAMP
);
```

### 구독
```sql
CREATE TABLE subscriptions (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,
  stripe_subscription_id TEXT UNIQUE,
  tier TEXT NOT NULL, -- free, pro, enterprise
  status TEXT NOT NULL, -- active, canceled, past_due
  current_period_end TIMESTAMP,
  credits_per_month INTEGER,
  created_at TIMESTAMP DEFAULT NOW()
);
```

### 크레딧 거래 내역
```sql
CREATE TABLE credit_transactions (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,
  job_id UUID REFERENCES jobs(id) ON DELETE SET NULL,
  amount INTEGER NOT NULL, -- 음수: 사용, 양수: 충전
  type TEXT NOT NULL, -- usage, purchase, refund, subscription
  balance_after INTEGER NOT NULL,
  created_at TIMESTAMP DEFAULT NOW()
);
```

---

## API 엔드포인트

### 인증
```
POST /api/auth/signup     - 회원가입
POST /api/auth/login      - 로그인
POST /api/auth/logout     - 로그아웃
GET  /api/auth/session    - 세션 확인
```

### 아바타 관리
```
POST   /api/avatars/create
  입력: { type, style, photos[] }
  출력: { avatar_id, status, preview_images }

GET    /api/avatars
  출력: [ { id, name, preview_images, status } ]

DELETE /api/avatars/:id
```

### 제품 관리
```
POST   /api/products/upload
  입력: FormData { file, type, name }
  출력: { product_id, processed_image_url, metadata }

GET    /api/products
  출력: [ { id, name, type, preview_url } ]

DELETE /api/products/:id
```

### 영상 생성
```
POST /api/jobs/create
  입력: {
    avatar_ids,
    product_id,
    background_type,
    background_id,
    action_type,
    action_reference_url?,
    style_references?
  }
  출력: { job_id, status, estimated_time }

GET  /api/jobs/:id
  출력: { status, progress, current_step, output_video_url?, error? }

GET  /api/jobs
  출력: [ { id, status, thumbnail_url, created_at } ]

POST /api/jobs/:id/retry
  출력: { success, new_status }
```

### 크레딧
```
GET  /api/credits/balance
  출력: { balance, subscription_tier }

POST /api/credits/purchase
  입력: { amount }
  출력: { checkout_url }
```

---

## 워크플로우 자동화

### 영상 생성 파이프라인 (Inngest)

```typescript
// 1단계: 프롬프트 생성 (30초 소요)
async function generatePrompt(job_id) {
  // GPT-4로 최적화된 프롬프트 생성
  // 캐릭터 + 제품 + 배경 + 동작 → 자연스러운 프롬프트
}

// 2단계: 씬 이미지 생성 (5분 소요)
async function generateSceneImages(job_id) {
  // Stable Diffusion XL + IP-Adapter++
  // 캐릭터 LoRA + 제품 임베딩 + 배경
  // 4개 앵글 동시 생성 (병렬 처리)
}

// 3단계: 품질 체크 (1분 소요)
async function qualityCheck(images) {
  // 제품 디테일 선명도 체크 (90% threshold)
  // 얼굴 일관성 체크
  // 배경 통합 자연스러움 체크
  // 통과 시 다음 단계, 실패 시 2단계 재시도
}

// 4단계: 영상 생성 (15-20분 소요)
async function generateVideo(job_id, scene_images) {
  // Google Veo 3.1 Fast API 호출
  // 15초 영상 생성
}

// 5단계: 후처리 (2분 소요)
async function postProcess(job_id, video_url) {
  // FFmpeg로 썸네일 생성
  // 메타데이터 추가
  // Cloudflare R2에 업로드
  // 사용자 알림 (이메일 + 푸시)
}

// 전체 파이프라인 통합
export const videoGenerationWorkflow = inngest.createFunction(
  { id: "video-generation" },
  { event: "job.created" },
  async ({ event, step }) => {
    const { job_id } = event.data;

    // 각 단계마다 진행률 업데이트
    const prompt = await step.run("generate-prompt", () =>
      generatePrompt(job_id)
    );

    const images = await step.run("generate-scenes", () =>
      generateSceneImages(job_id, prompt)
    );

    const qualityPassed = await step.run("quality-check", () =>
      qualityCheck(images)
    );

    if (!qualityPassed && retry_count < 3) {
      await step.sendEvent("job.retry", { job_id, step: "scene-generation" });
      return;
    }

    const video = await step.run("generate-video", () =>
      generateVideo(job_id, images)
    );

    await step.run("post-process", () =>
      postProcess(job_id, video)
    );
  }
);
```

**총 소요 시간**: 약 25-30분

---

## UI/UX 설계

### 레이아웃 구조

```
┌─────────────────────────────────────────────┐
│ 헤더: 로고 + 크레딧 + 사용자 메뉴           │
├──────────────┬──────────────────────────────┤
│              │                              │
│  왼쪽 패널   │     메인 캔버스              │
│  (옵션)      │     (미리보기)               │
│              │                              │
│  - 1단계     │                              │
│  - 2단계     │     큰 미리보기              │
│  - 3단계     │     영역                     │
│  - 4단계     │                              │
│              │                              │
│              │                              │
│  [생성하기]  │     진행률 바                │
│              │                              │
└──────────────┴──────────────────────────────┘
```

### 페이지 구조

**대시보드 (/dashboard)**
- 최근 영상 갤러리
- 크레딧 잔액
- 빠른 액션: [새 영상 만들기, 모델 관리, 제품 관리]

**영상 만들기 (/create)**
- 왼쪽: 옵션 패널 (스크롤 가능)
  - 1단계: 모델 선택
  - 2단계: 제품 업로드
  - 3단계: 배경 선택
  - 4단계: 동작 선택
- 오른쪽: 미리보기 (고정)
- 하단: [생성하기] 버튼

**모델 관리 (/avatars)**
- 그리드 갤러리
- [+ 새 모델 만들기] 버튼
- 각 카드: 프리뷰 + 이름 + [사용하기/삭제]

**제품 관리 (/products)**
- 그리드 갤러리
- [+ 제품 업로드] 버튼
- 각 카드: 썸네일 + 이름 + 타입 + [사용하기/삭제]

**라이브러리 (/library)**
- 생성된 영상 갤러리
- 필터: [모두, 완료, 처리중, 실패]
- 각 카드: 썸네일 + 상태 + [다운로드/재생성]

**설정 (/settings)**
- 프로필 설정
- 크레딧 구매
- 구독 관리

### UI 디자인 벤치마크

**Runway ML 참고사항**:
- 드래그 앤 드롭 인터페이스
- 명확한 진행률 표시
- 큰 미리보기 영역

**Canva 참고사항**:
- 왼쪽 옵션, 오른쪽 미리보기 레이아웃
- 큰 썸네일 그리드
- 직관적인 아이콘

**ChatGPT 스타일 금지**:
- 대화형 UI 사용 안 함
- 폼 기반 입력만 사용

---

## 개발 일정

### 1-2주차: 프로젝트 초기화
- Next.js 14 프로젝트 생성
- Supabase 설정 (DB, Auth, Storage)
- 기본 레이아웃 및 라우팅
- Tailwind + Shadcn/ui 설정

### 3-4주차: 인증 및 대시보드
- 회원가입/로그인 플로우
- 대시보드 UI
- 크레딧 시스템 기본 구현

### 5-6주차: 모델 생성
- Midjourney API 연동
- 모델 생성 UI
- LoRA 학습 파이프라인 (Phase 1.5)
- 모델 관리 페이지

### 7-8주차: 제품 업로드
- 제품 업로드 UI
- 배경 제거 처리
- IP-Adapter++ 임베딩 생성
- 제품 갤러리

### 9-10주차: 영상 생성 (MVP)
- Veo 3.1 API 연동
- 씬 이미지 생성 파이프라인
- Inngest 워크플로우 구현
- 영상 생성 UI
- 품질 체크 및 재시도 로직

### 11-12주차: 통합 테스트 및 버그 수정
- End-to-end 테스트
- 성능 최적화
- 에러 핸들링 개선
- 사용자 피드백 반영

### 13-14주차: Phase 1.5 (멀티 모델)
- Multi-LoRA 블렌딩
- Multi-person UI

### 15-16주차: Phase 1.5 (커스텀 옵션)
- 커스텀 배경 업로드
- 커스텀 스타일 레퍼런스
- 커스텀 동작 (DWPose)

---

## 코딩 시 주의사항

### 절대 금지 사항

1. **FastAPI 사용 금지**: Next.js API Routes만 사용
2. **대화형 UI 금지**: ChatGPT 스타일 채팅 인터페이스 금지
3. **Over-engineering 금지**: 요청되지 않은 기능 추가 금지
4. **Scope creep 금지**: MVP에 Phase 1.5 기능 포함 금지
5. **15초 이외 길이 지원 금지**: 영상 길이는 15초 고정
6. **수동 편집 기능 금지**: 자동화만 지원

### 필수 준수 사항

1. **TypeScript 엄격 모드**: `strict: true` in tsconfig.json
2. **에러 핸들링**: 모든 API 호출에 try-catch
3. **로딩 상태**: 모든 비동기 작업에 로딩 UI
4. **진행률 표시**: Inngest 워크플로우의 각 단계마다 DB 업데이트
5. **크레딧 차감**: 영상 생성 시작 전 크레딧 확인 및 차감
6. **품질 threshold**: 90% 미만 시 자동 재시도 (최대 3회)
7. **재시도 로직**: 실패 시 전체 재생성이 아닌 실패한 단계만 재시도

### 코드 스타일 예시

```typescript
// API Routes 구조
export async function POST(req: Request) {
  try {
    // 1. 인증 확인
    const session = await getSession();
    if (!session) return unauthorized();

    // 2. 입력 검증
    const body = await req.json();
    const validated = schema.parse(body);

    // 3. 비즈니스 로직
    const result = await processLogic(validated);

    // 4. 응답
    return json({ success: true, data: result });
  } catch (error) {
    // 5. 에러 처리
    return handleError(error);
  }
}

// 컴포넌트 구조
export function VideoCreator() {
  // 1. 상태 관리
  const [step, setStep] = useState(1);
  const [loading, setLoading] = useState(false);

  // 2. 데이터 fetching
  const { data: avatars } = useQuery('avatars', fetchAvatars);

  // 3. 이벤트 핸들러
  const handleSubmit = async () => {
    setLoading(true);
    try {
      await createJob(formData);
    } catch (error) {
      toast.error(error.message);
    } finally {
      setLoading(false);
    }
  };

  // 4. 렌더링
  return (
    <div className="grid grid-cols-[300px_1fr]">
      <OptionsPanel />
      <PreviewCanvas />
    </div>
  );
}
```

---

## 성능 최적화

### 이미지 최적화
```typescript
// Next.js Image 컴포넌트 사용
<Image
  src={avatar.preview}
  alt={avatar.name}
  width={300}
  height={400}
  className="object-cover"
  loading="lazy"
/>
```

### API 응답 캐싱
```typescript
// Next.js 14 fetch 캐싱
export async function getAvatars() {
  const res = await fetch('/api/avatars', {
    next: { revalidate: 60 } // 60초 캐시
  });
  return res.json();
}
```

### 병렬 처리
```typescript
// 씬 이미지 병렬 생성
const scenePromises = angles.map(angle =>
  generateScene(prompt, angle)
);
const scenes = await Promise.all(scenePromises);
```

---

## 보안

### 인증/인가
```typescript
// 모든 API에 인증 확인
export async function POST(req: Request) {
  const session = await getServerSession();
  if (!session) {
    return new Response('Unauthorized', { status: 401 });
  }

  // 리소스 소유권 확인
  const avatar = await getAvatar(avatarId);
  if (avatar.user_id !== session.user.id) {
    return new Response('Forbidden', { status: 403 });
  }
}
```

### 입력 검증
```typescript
// Zod 스키마 검증
const createJobSchema = z.object({
  avatar_ids: z.array(z.string().uuid()).min(1).max(3),
  product_id: z.string().uuid(),
  background_type: z.enum(['preset', 'custom_image', 'custom_video']),
  action_type: z.enum(['walk', 'stand_pose', 'turn', 'casual_movement', 'custom'])
});

const validated = createJobSchema.parse(body);
```

### 파일 업로드 검증
```typescript
// 파일 타입 및 크기 제한
const MAX_FILE_SIZE = 10 * 1024 * 1024; // 10MB
const ALLOWED_TYPES = ['image/jpeg', 'image/png', 'image/webp'];

if (file.size > MAX_FILE_SIZE) {
  throw new Error('파일 크기가 너무 큽니다');
}
if (!ALLOWED_TYPES.includes(file.type)) {
  throw new Error('지원하지 않는 파일 형식입니다');
}
```

---

## 마케팅 포지셔닝 전략

### 핵심 메시지

**메인 슬로건**:
> "Runway는 모든 것을 할 수 있습니다.
> 우리는 패션 하나만 완벽하게 합니다."

**부 슬로건**:
> "모델 촬영 없이 마케팅 영상 제작
> 제품 사진 1장 → AI 모델 영상 15초"

### 타겟 페르소나

#### 페르소나 1: 이커머스 패션 브랜드 대표
```
고객: "우리 브랜드는 매주 신상품이 나오는데,
       매번 모델 촬영하기엔 비용이 너무 많이 들어요"

솔루션:
- 제품 사진만 업로드 → 자동 영상 생성
- 모델 촬영 비용 90% 절감
- 주 10개 제품 → 2시간 안에 완성

메시지:
"모델 비용 $10,000 → AI로 $150에 해결하세요"
```

#### 페르소나 2: 마케팅 담당자 (영상 편집 경험 없음)
```
고객: "Runway 써봤는데 너무 복잡하고,
       결과물이 마음에 안 들면 다시 해야 해서 시간만 낭비했어요"

솔루션:
- 편집 지식 불필요 (클릭만)
- 자동 품질 체크 (90% threshold)
- 실패 시 자동 재생성 (무료)

메시지:
"Runway는 도구, 우리는 자동화된 서비스입니다"
```

#### 페르소나 3: 인플루언서 (여러 브랜드 협찬)
```
고객: "협찬 제품마다 영상 만들기 힘들어요.
       특히 제품이 예쁘게 나와야 하는데..."

솔루션:
- 제품 디테일 90% 보장
- 같은 캐릭터로 브랜드 일관성
- 배치 생성 (10개 → 90분)

메시지:
"당신의 얼굴로 학습된 AI 모델이 모든 제품을 착용해드립니다"
```

### 경쟁사 대비 포지셔닝 맵

```
              고가/범용
                 │
                 │  Runway Gen-4
                 │  (만능 도구)
                 │
  범용 ─────────┼───────── 전문
                 │
                 │  우리 서비스
                 │  (패션 전문가)
                 │
              저가/특화
```

### 주요 카피 라이팅

#### 랜딩 페이지 헤드라인
```
Before (현재):
"Create marketing videos with AI models wearing your products"

After (개선안):
"패션 촬영 없이 마케팅 영상 제작
제품 사진 1장 → AI 모델 영상 자동 생성
Runway보다 간단하고, 패션에 특화되어 정확합니다"
```

#### 기능 설명 카피
```
❌ 하지 말 것:
"Runway보다 저렴합니다"
"Runway보다 쉽습니다"
"Runway보다 빠릅니다"

✅ 할 것:
"패션 브랜드를 위한 전용 솔루션"
"영상 편집 없이 2분 만에 완성"
"제품 디테일 90% 보장 (자동 품질 체크)"
"편집 지식 불필요, 클릭 몇 번이면 완료"
```

#### 독점 기능 강조 (Phase 1.5.5)
```
헤드라인:
"Runway Gen-4도 못하는 기능!"

서브카피:
"실제 모델 촬영은 한 번만, AI로 무한 재활용
1회 촬영 $1,000 → 무한대 버전 $10/개"

CTA:
"지금 무료로 체험하기 (10 크레딧 제공)"
```

### 비교 페이지 구성안 (/compare-runway)

#### 섹션 1: 기능 비교표
- 10개 항목 비교 (체크마크/X 표시)
- 우위 항목 하이라이트

#### 섹션 2: 실제 사용 시나리오
- "신상품 10개 영상 제작" 시나리오
- 시간/비용/품질 비교
- 인포그래픽으로 시각화

#### 섹션 3: 독점 기능 강조
- Video Character Transfer 설명
- 비용 절감 계산기
- Before/After 비교 영상

#### 섹션 4: Runway에서 갈아타기
- 마이그레이션 가이드
- 특별 할인 (첫 100개 영상 20% 할인)
- 무료 상담 제공

### 콘텐츠 마케팅 전략

#### 1. 블로그 포스트
```
제목 아이디어:
- "Runway Gen-4 vs [서비스명]: 패션 브랜드는 무엇을 선택해야 할까?"
- "모델 촬영 비용 90% 절감하는 법"
- "AI 영상 생성 도구, 왜 패션 특화가 중요한가?"
- "Runway로 패션 영상 만들었다가 실패한 이유"
```

#### 2. 케이스 스터디
```
포맷:
- 고객 브랜드 소개
- 기존 문제점 (비용/시간/품질)
- 우리 솔루션 도입 과정
- 결과 (수치로 증명)
- 고객 인터뷰 (동영상)

목표 지표:
- 비용 절감: 85-95%
- 시간 절감: 80-90%
- 영상 생산량: 10배 증가
```

#### 3. 비교 영상 (YouTube)
```
시나리오:
- 같은 제품으로 Runway vs 우리 서비스 비교
- 실시간으로 프로세스 시연
- 결과물 품질 비교
- 소요 시간 비교
- 총 비용 계산

길이: 5-7분
CTA: 무료 체험 링크
```

### SNS 전략

#### LinkedIn (B2B 타겟)
```
콘텐츠 유형:
- 산업 인사이트 (패션 마케팅 트렌드)
- ROI 계산 포스트
- 고객 성공 사례
- 제품 업데이트

발행 주기: 주 2회
```

#### Instagram (인플루언서 타겟)
```
콘텐츠 유형:
- Before/After 비교
- 제작 과정 타임랩스
- 고객 작품 리포스트
- 팁 & 트릭

발행 주기: 주 3-4회
릴스 활용: 짧은 튜토리얼
```

#### Twitter/X (업계 전문가)
```
콘텐츠 유형:
- AI 업계 뉴스 코멘트
- Runway 업데이트 대응 (우리는 이미 가능)
- 기술 스택 공유
- 개발 업데이트

발행 주기: 주 5-7회
```

### 무료 체험 전략

#### 현재
```
- 회원가입 시 10 크레딧 제공
```

#### 개선안
```
1단계: 체험 전 미리보기
- 회원가입 없이 샘플 제품으로 체험
- 데모 영상 즉시 확인
- "마음에 드셨나요? 회원가입하고 10개 무료 제작"

2단계: 온보딩 최적화
- 튜토리얼 영상 (1분)
- 첫 영상 생성 가이드
- 성공 시 보너스 5 크레딧 추가

3단계: 바이럴 루프
- 친구 초대 시 양쪽 모두 5 크레딧
- SNS 공유 시 3 크레딧
- 리뷰 작성 시 5 크레딧
```

### 런칭 캠페인 (MVP 출시 시)

#### Phase 1: Pre-Launch (2주 전)
```
- 대기자 명단 오픈
- 조기 접근 혜택: 50% 할인 + 20 크레딧
- Runway 사용자 타겟 광고
- 업계 인플루언서 체험단 모집
```

#### Phase 2: Launch Day
```
- Product Hunt 론칭
- 프레스 릴리스 배포
- SNS 동시 발표
- 런칭 특가: 24시간 동안 첫 100개 영상 30% 할인
```

#### Phase 3: Post-Launch (2주)
```
- 고객 피드백 수집
- 케이스 스터디 발표
- Runway 비교 콘텐츠 집중 배포
- 얼리어답터 인터뷰 공개
```

---

## 비용 예측

### 월간 운영 비용 (100개 영상 기준)

**AI 서비스**:
- Veo 3.1 Fast: $2.25 × 100 = $225
- Midjourney: $30/월 (무제한)
- Replicate: ~$50
- OpenAI GPT-4: ~$20
- 소계: ~$325

**인프라**:
- Vercel Pro: $20/월
- Supabase Pro: $25/월
- Cloudflare R2: ~$15/월 (100GB)
- Inngest: ~$50/월
- 소계: ~$110

**총 원가**: ~$435/월 (100개 영상)
- 영상당 원가: $4.35

**판매가 (영상당 $20 가정)**:
- 수익: $2,000
- 원가: $435
- 순이익: $1,565 (78% 마진)

---

## FAQ (개발자용)

**Q: Phase 1에 멀티 모델 기능을 추가해도 될까요?**
A: 절대 안 됩니다. MVP는 단일 모델만 지원합니다. Phase 1.5에서 추가하세요.

**Q: 사용자가 영상 길이를 변경하고 싶어 합니다.**
A: 15초 고정입니다. 변경 불가입니다.

**Q: 수동 편집 기능을 추가하면 어떨까요?**
A: 이 플랫폼은 자동화에 집중합니다. 수동 편집은 범위 밖입니다.

**Q: Runway ML API를 대신 사용하면?**
A: 기술 스택은 변경 금지입니다. Veo 3.1을 사용하세요.

**Q: 품질 threshold를 80%로 낮추면?**
A: 90%는 최소 기준입니다. 제품 디테일이 핵심 가치입니다.

**Q: 재시도를 5회로 늘리면?**
A: 3회 초과 시 비용 대비 효율이 떨어집니다. 3회 고정입니다.

**Q: 대화형 UI가 더 좋지 않을까요?**
A: 사용자는 빠른 결과를 원합니다. 폼 기반 UI를 유지하세요.

---

## 버전 관리

- **v0.1 (MVP)**: 단일 모델 + 프리셋 배경 + 기본 동작
- **v0.2 (Phase 1.5)**: 멀티 모델 + 커스텀 배경
- **v0.3 (Phase 1.5)**: 커스텀 스타일 + 커스텀 동작
- **v1.0**: 전체 기능 + 안정화
- **v1.1+**: 배치 생성, 템플릿, 팀 협업 등 (향후 계획)

---

## 환경 변수

```bash
# .env.local (절대 커밋 금지)
NEXT_PUBLIC_SUPABASE_URL=
NEXT_PUBLIC_SUPABASE_ANON_KEY=
SUPABASE_SERVICE_ROLE_KEY=

MIDJOURNEY_API_KEY=
GOOGLE_GEMINI_API_KEY=
REPLICATE_API_TOKEN=
OPENAI_API_KEY=

CLOUDFLARE_ACCOUNT_ID=
CLOUDFLARE_R2_ACCESS_KEY=
CLOUDFLARE_R2_SECRET_KEY=

INNGEST_EVENT_KEY=
INNGEST_SIGNING_KEY=

STRIPE_SECRET_KEY=
STRIPE_WEBHOOK_SECRET=

NEXT_PUBLIC_APP_URL=
```

---

## 문서 변경 이력

- 2025-11-21: 초기 작성 (MVP 기준, 한국어 버전)

---

**이 문서는 프로젝트의 절대 기준점입니다. 개발 중 scope creep이 발생하지 않도록 이 문서를 계속 참조하세요.**
